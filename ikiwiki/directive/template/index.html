<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8" />
<title>template</title>

<link rel="icon" href="../../../favicon.ico" type="image/x-icon" />

<link rel="stylesheet" href="../../../style.css" type="text/css" />

<link rel="stylesheet" href="../../../local.css" type="text/css" />



<link rel="vcs-mercurial" href="http://bitbucket.org/weakish/weakish" title="wiki mercurial repository" />
<meta name="robots" content="noindex, follow" />
</head>
<body>

<article class="page">

<section class="pageheader">
<header class="header">
<span>
<span class="parentlinks">

<a href="../../../">weakish</a>/ 

<a href="../../">ikiwiki</a>/ 

<a href="../">directive</a>/ 

</span>
<span class="title">
template

</span>
</span>


<form method="get" action="http://www.google.com/search" id="searchform">
 <div>
  <input name="sitesearch" value="http://weakish.github.com/" type="hidden" />
  <input name="q" value="" id="searchbox" size="16" maxlength="255" type="text"
  placeholder="search" />
 </div>
</form>


</header>





</section>



<div id="pagebody">

<section id="content">
<p>The <code>template</code> directive is supplied by the <a href="http://ikiwiki.info/plugins/template/">template</a> plugin.</p>

<p>The template directive allows wiki pages to be used as templates.
These templates can be filled out and inserted into other pages in the
wiki using the directive. The <a href="../../../templates/">templates</a> page lists templates
that can be used with this directive.</p>

<p>The directive has an <code>id</code> parameter
that identifies the template to use. The remaining parameters are used to
fill out the template.</p>

<h2>Example</h2>

<pre><code>[[!template  id=note text=&quot;&quot;&quot;Here is the text to insert into my note.&quot;&quot;&quot;]]
</code></pre>

<p>This fills out the <code>note</code> template, filling in the <code>text</code> field with
the specified value, and inserts the result into the page.</p>

<h2>Using a template</h2>

<p>Generally, a value can include any markup that would be allowed in the wiki
page outside the template. Triple-quoting the value even allows quotes to
be included in it. Combined with multi-line quoted values, this allows for
large chunks of marked up text to be embedded into a template:</p>

<pre><code>    [[!template  id=foo name=&quot;Sally&quot; color=&quot;green&quot; age=8 notes=&quot;&quot;&quot;
    * [[Charley]]&#39;s sister.
    * &quot;I want to be an astronaut when I grow up.&quot;
    * Really 8 and a half.
    &quot;&quot;&quot;]]
</code></pre>

<h2>Creating a template</h2>

<p>The template is a regular wiki page, located in the <code>templates/</code>
subdirectory inside the source directory of the wiki.</p>

<p>Alternatively, templates can be stored in a directory outside the wiki,
as files with the extension &quot;.tmpl&quot;.
By default, these are searched for in <code>/usr/share/ikiwiki/templates</code>,
the <code>templatedir</code> setting can be used to make another directory be searched
first.  When referring to templates outside the wiki source directory, the &quot;id&quot;
parameter is not interpreted as a pagespec, and you must include the full filename
of the template page, including the &quot;.tmpl&quot; extension. E.g.:</p>

<pre><code>[[!template  id=blogpost.tmpl]]
</code></pre>

<p>The template uses the syntax used by the <a href="http://search.cpan.org/search?mode=dist&amp;query=HTML%3A%3ATemplate">HTML::Template</a> perl
module, which allows for some fairly complex things to be done. Consult its
documentation for the full syntax, but all you really need to know are a
few things:</p>

<ul>
<li>Each parameter you pass to the template directive will generate a 
template variable. There are also some pre-defined variables like PAGE
and BASENAME.</li>
<li>To insert the value of a variable, use <code>&lt;TMPL_VAR variable&gt;</code>. Wiki markup
in the value will first be converted to html.</li>
<li>To insert the raw value of a variable, with wiki markup not yet converted
to html, use <code>&lt;TMPL_VAR raw_variable&gt;</code>.</li>
<li>To make a block of text conditional on a variable being set use
<code>&lt;TMPL_IF variable&gt;text&lt;/TMPL_IF&gt;</code>.</li>
<li>To use one block of text if a variable is set and a second if it&#39;s not,
use <code>&lt;TMPL_IF variable&gt;text&lt;TMPL_ELSE&gt;other text&lt;/TMPL_IF&gt;</code></li>
</ul>

<p>Here&#39;s a sample template:</p>

<pre><code>    &lt;span class=&quot;infobox&quot;&gt;
    Name: [[&lt;TMPL_VAR raw_name&gt;]]&lt;br /&gt;
    Age: &lt;TMPL_VAR age&gt;&lt;br /&gt;
    &lt;TMPL_IF color&gt;
    Favorite color: &lt;TMPL_VAR color&gt;&lt;br /&gt;
    &lt;TMPL_ELSE&gt;
    No favorite color.&lt;br /&gt;
    &lt;/TMPL_IF&gt;
    &lt;TMPL_IF notes&gt;
    &lt;hr /&gt;
    &lt;TMPL_VAR notes&gt;
    &lt;/TMPL_IF&gt;
    &lt;/span&gt;
</code></pre>

<p>The filled out template will be formatted the same as the rest of the page
that contains it, so you can include WikiLinks and all other forms of wiki
markup in the template. Note though that such WikiLinks will not show up as
backlinks to the page that uses the template.</p>

<p>Note the use of &quot;raw_name&quot; inside the <a href="../../wikilink/">WikiLink</a> generator in the
example above. This ensures that if the name contains something that might
be mistaken for wiki markup, it&#39;s not converted to html before being
processed as a <a href="../../wikilink/">WikiLink</a>.</p>

</section>





</div>

<footer id="footer" class="pagefooter">

<nav id="pageinfo">




<nav id="backlinks">
Links:

<a href="../edittemplate/">edittemplate</a>

<a href="../if/">if</a>

<a href="../pagetemplate/">pagetemplate</a>


</nav>






<div class="pagedate">
Last edited <time datetime="2010-11-15T14:41:40Z">Mon 15 Nov 2010 10:41:40 PM CST</time>
<!-- Created <time datetime="2010-06-10T20:08:49Z" pubdate="pubdate">Fri 11 Jun 2010 04:08:49 AM CST</time> -->
</div>

</nav>


<!-- from weakish -->
</footer>

</article>

</body>
</html>
