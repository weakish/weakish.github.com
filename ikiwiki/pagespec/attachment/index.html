<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8" />
<title>attachment</title>

<link rel="icon" href="../../../favicon.ico" type="image/x-icon" />

<link rel="stylesheet" href="../../../style.css" type="text/css" />

<link rel="stylesheet" href="../../../local.css" type="text/css" />



<link rel="vcs-mercurial" href="https://weakish@bitbucket.org/weakish/weakish" title="wiki mercurial repository" />
<meta name="robots" content="noindex, follow" />
</head>
<body>

<article class="page">

<section class="pageheader">
<header class="header">
<span>
<span class="parentlinks">

<a href="../../../">weakish</a>/ 

<a href="../../">ikiwiki</a>/ 

<a href="../">pagespec</a>/ 

</span>
<span class="title">
attachment

</span>
</span>


<form method="get" action="http://www.google.com/search" id="searchform">
 <div>
  <input name="sitesearch" value="http://weakish.github.com/" type="hidden" />
  <input name="q" value="" id="searchbox" size="16" maxlength="255" type="text"
  placeholder="search" />
 </div>
</form>


</header>





</section>



<div id="pagebody">

<section id="content">
<p>This wiki has attachments <strong>disabled</strong>.</p>

<p>If attachments are enabled, the wiki admin can control what types of
attachments will be accepted, via the <code>allowed_attachments</code>
configuration setting.</p>

<p>For example, to limit most users to uploading small images, and nothing else,
while allowing larger mp3 files to be uploaded by joey into a specific
directory, and check all attachments for viruses, something like this could be
used:</p>

<pre><code>virusfree() and ((user(joey) and podcast/*.mp3 and mimetype(audio/mpeg) and maxsize(15mb)) or (mimetype(image/*) and maxsize(50kb)))
</code></pre>

<p>The regular <a href="../">PageSpec</a> syntax is expanded with the following
additional tests:</p>

<ul>
<li><p>&#34;<code>maxsize(size)</code>&#34; - tests whether the attachment is no larger than the
specified size. The size defaults to being in bytes, but &#34;kb&#34;, &#34;mb&#34;, &#34;gb&#34;
etc can be used to specify the units.</p></li>
<li><p>&#34;<code>minsize(size)</code>&#34; - tests whether the attachment is no smaller than the
specified size.</p></li>
<li><p>&#34;<code>ispage()</code>&#34; - tests whether the attachment will be treated by ikiwiki as a
wiki page. (Ie, if it has an extension of &#34;.mdwn&#34;, or of any other enabled
page format).</p>

<p>So, if you don&#39;t want to allow wiki pages to be uploaded as attachments,
use <code>!ispage()</code> ; if you only want to allow wiki pages to be uploaded
as attachments, use <code>ispage()</code>.</p></li>
<li><p>&#34;<code>mimetype(foo/bar)</code>&#34; - checks the MIME type of the attachment. You can
include a glob in the type, for example <code>mimetype(image/*)</code>.</p></li>
<li><p>&#34;<code>virusfree()</code>&#34; - checks the attachment with an antiviral program.</p></li>
</ul>

</section>





</div>

<footer id="footer" class="pagefooter">

<nav id="pageinfo">









<div class="pagedate">
Last edited <time datetime="2010-04-23T21:36:07Z">Sat 24 Apr 2010 05:36:07 AM CST</time>
<!-- Created <time datetime="2009-12-24T05:37:17Z" pubdate="pubdate">Thu 24 Dec 2009 01:37:17 PM CST</time> -->
</div>

</nav>


<!-- from weakish -->
</footer>

</article>

</body>
</html>
